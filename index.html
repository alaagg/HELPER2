<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Helper Pren – AI Interface</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      background: radial-gradient(circle at center, #010308 0%, #000 100%);
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: #fff;
    }
    .title {
      font-size: 2em;
      font-weight: bold;
      margin-bottom: 20px;
      text-shadow: 0 0 10px #00ccff;
    }
    .input-box {
      width: 90%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    input {
      width: 100%;
      padding: 15px;
      border-radius: 10px;
      border: none;
      font-size: 1em;
      background: #111;
      color: #00ccff;
      box-shadow: 0 0 10px #00ccff55;
      outline: none;
      margin-bottom: 10px;
    }
    button {
      padding: 12px 25px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background-color: #00ccff;
      color: #000;
      cursor: pointer;
      box-shadow: 0 0 10px #00ccff88;
    }
    .response {
      margin-top: 30px;
      text-align: center;
      font-size: 1.2em;
      background: rgba(255,255,255,0.05);
      padding: 15px 20px;
      border-radius: 10px;
      max-width: 90%;
      box-shadow: 0 0 20px #00ccff22;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <div class="title">Helper Pren</div>
  <div class="input-box">
    <input type="text" id="userInput" placeholder="اكتب ما تريد..." onkeydown="handleKey(event)">
    <button onclick="manualSend()">Send</button>
    <div id="response" class="response" style="display:none"></div>
  </div>

  <script>
    let userLocation = "تعذر تحديد الموقع";

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        function(pos) {
          const lat = pos.coords.latitude.toFixed(4);
          const lon = pos.coords.longitude.toFixed(4);
          userLocation = `https://www.google.com/maps/search/مطاعم/@${lat},${lon},15z`;
        },
        function(err) {
          userLocation = "تعذر الوصول إلى موقعك";
        }
      );
    }

    function normalizeText(text) {
      return text
        .toLowerCase()
        .replace(/[أإآا]/g, "ا")
        .replace(/[ةه]/g, "ه")
        .replace(/[ى]/g, "ي")
        .replace(/[ًٌٍَُِّْ]/g, "");
    }

    function handleKey(e) {
      if (e.key === "Enter") {
        const val = document.getElementById("userInput").value.trim();
        if (val !== "") respondToUser(val);
      }
    }

    function manualSend() {
      const val = document.getElementById("userInput").value.trim();
      if (val !== "") respondToUser(val);
    }

    function respondToUser(text) {
      const res = document.getElementById("response");
      let reply = "";
      const normalized = normalizeText(text);

      if (normalized.includes("تسلي") || normalized.includes("ملل") || normalized.includes("فيديو")) {
        reply = "🎥 عرض مقاطع فيديو ترفيهية جديدة لك الآن...";
      } else if (normalized.includes("جعان") || normalized.includes("اكل") || normalized.includes("غدا")) {
        reply = `🍔 أقرب مطاعم مقترحة بناءً على موقعك:<br><br>📍 <a href="${userLocation}" target="_blank" style="display:inline-block; padding:10px 18px; background:#00ccff; color:#000; font-weight:bold; border-radius:10px; text-decoration:none; box-shadow:0 0 10px #00ccff88;">عرض في Google Maps</a>`;
      } else if (normalized.includes("تعبان") || normalized.includes("راحه") || normalized.includes("صحه")) {
        reply = "🧘‍♂️ تمارين خفيفة + جلسة تأمل لمدة 5 دقائق...";
      } else if (normalized.includes("ادرس") || normalized.includes("تعلم") || normalized.includes("ركز")) {
        reply = "📚 وضع تركيز مفعّل + مصادر تعلّم ذكية جاهزة...";
      } else {
        reply = "🤖 Helper Pren يفكر... تم تحليل طلبك، جاري تجهيز أفضل رد...";
      }

      res.style.display = "block";
      res.innerHTML = reply;
    }
  </script>
</body>
</html>
